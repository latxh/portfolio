<!DOCTYPE html>
<html lang="en">

<head>
    <title>Brian Latchman</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=0" />
    <meta name="description" content="Creating experiences for people to use, enjoy and explore.">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-touch-fullscreen" content="yes" />

    <meta property='og:title' content="Brian Latchman" />
    <meta property='og:image' content='https://latchman.ca/assets/portrait.jpg' />
    <meta property='og:description' content="Creating experiences for people to use, enjoy and explore." />
    <meta property='og:url' content='https://latchman.ca/' />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r67/three.min.js"></script>

    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <link rel="stylesheet" type="text/css" href="css/styles.css">
</head>

<body>
    <button onclick="topFunction()" id="top-btn" title="Go to top of page">
        <svg fill="var(--font-light)" width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13.22 6.781a.75.75 0 0 1-.073-.976l.073-.085 2.367-2.37a.77.77 0 0 1 .664-.35c.252 0 .475.109.611.276l.053.075 2.367 2.37.073.084a.75.75 0 0 1 .007.882l-.08.094-.084.073a.75.75 0 0 1-.883.007l-.094-.08L17 5.56v14.784l-.007.089c-.05.32-.363.567-.743.567s-.694-.247-.743-.567l-.007-.09V5.56l-1.22 1.221-.084.073a.75.75 0 0 1-.976-.073ZM6.25 3.992A2.25 2.25 0 0 0 4 6.242v11.5a2.25 2.25 0 0 0 2.25 2.25h6a.75.75 0 0 0 0-1.5h-6a.75.75 0 0 1-.75-.75v-11.5a.75.75 0 0 1 .75-.75h4a.75.75 0 0 0 0-1.5h-4Z"/></svg>
    </button>
    <div class="max-width">
        <div class="cs-top">
            <nav>
                <h3><a class="underline-animation" href="/">‚Üê Home</a></h3>
                <div class="spacer"></div>
                <h3><a class="underline-animation" href="/about">About me</a></h3>
                <h3><a class="underline-animation" href="/photos">Photos</a></h3>
                <div class="button-wrapper">
                    <button id="canvas-size" title="Toggle visual effects" onclick="toggleCanvas()">
                        <svg id="canvas-on" class="hide" fill="var(--font-light)" width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.909 5h1.34a.75.75 0 0 1 .102 1.493L9.25 6.5H7.91a.75.75 0 0 0-.477.17l-.075.073-2.074 2.256h3.466a2.25 2.25 0 0 1 2.237 2.005h2.027A2.25 2.25 0 0 1 15.25 9l3.477-.001-2.083-2.258a.75.75 0 0 0-.448-.234l-.104-.007h-1.345a.75.75 0 0 1-.102-1.493L14.747 5h1.346a2.25 2.25 0 0 1 1.52.592l.133.132 3.642 3.947c.05.055.091.115.122.178.306.384.489.871.489 1.4v3.497a3.25 3.25 0 0 1-3.25 3.25H16.25a3.25 3.25 0 0 1-3.25-3.25l-.001-2.242h-2.001v2.242a3.25 3.25 0 0 1-3.25 3.25H5.25A3.25 3.25 0 0 1 2 14.746V11.25c0-.562.206-1.076.546-1.47l.038-.055.044-.052 3.624-3.945a2.25 2.25 0 0 1 1.469-.72L7.909 5h1.34-1.34Zm.84 5.5H4.25a.75.75 0 0 0-.75.75v3.496c0 .967.784 1.75 1.75 1.75h2.499a1.75 1.75 0 0 0 1.75-1.75V11.25a.75.75 0 0 0-.75-.75Zm11 0H15.25a.75.75 0 0 0-.75.75v3.496c0 .967.784 1.75 1.75 1.75h2.499a1.75 1.75 0 0 0 1.75-1.75V11.25a.75.75 0 0 0-.75-.75Z"/></svg>
                        <svg id="canvas-off" fill="var(--font-light)" width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l3.273 3.274-2.865 3.119-.044.052-.038.055c-.34.394-.546.908-.546 1.47v3.496a3.25 3.25 0 0 0 3.25 3.25h2.499a3.25 3.25 0 0 0 3.25-3.25l-.001-2.242h.445L13 14.061v.685a3.25 3.25 0 0 0 3.25 3.25h.685l3.784 3.785a.75.75 0 0 0 1.061-1.061L3.28 2.22ZM7.94 9l-2.656-.001 1.272-1.384L7.939 9ZM4.25 10.5h4.499a.75.75 0 0 1 .75.75v3.496a1.75 1.75 0 0 1-1.75 1.75H5.25a1.75 1.75 0 0 1-1.75-1.75V11.25a.75.75 0 0 1 .75-.75ZM13.303 10.121l1.197 1.197v-.068a.75.75 0 0 1 .75-.75h4.499a.75.75 0 0 1 .75.75v3.496a1.75 1.75 0 0 1-.993 1.578l1.094 1.094a3.246 3.246 0 0 0 1.399-2.672V11.25c0-.53-.183-1.017-.489-1.4a.748.748 0 0 0-.122-.179l-3.642-3.947-.133-.132A2.25 2.25 0 0 0 16.093 5h-1.346l-.102.007a.75.75 0 0 0 .102 1.493h1.346l.103.007a.75.75 0 0 1 .448.234L18.727 9H15.25c-.831 0-1.557.452-1.947 1.122Z"/></svg>
                    </button>
                    <button id="dark-mode" title="Toggle dark mode" onclick="toggleDarkMode()">
                        <svg id="light" class="hide" fill="var(--font-light)" width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11.996 19.01a.75.75 0 0 1 .743.649l.007.102v1.5a.75.75 0 0 1-1.493.101l-.007-.101v-1.5a.75.75 0 0 1 .75-.75Zm6.022-2.072 1.06 1.06a.75.75 0 1 1-1.06 1.061l-1.06-1.06a.75.75 0 0 1 1.06-1.061Zm-10.983 0a.75.75 0 0 1 0 1.06L5.974 19.06a.75.75 0 0 1-1.06-1.06l1.06-1.061a.75.75 0 0 1 1.06 0ZM12 6.475a5.525 5.525 0 1 1 0 11.05 5.525 5.525 0 0 1 0-11.05Zm0 1.5a4.025 4.025 0 1 0 0 8.05 4.025 4.025 0 0 0 0-8.05Zm9.25 3.293a.75.75 0 0 1 .102 1.493l-.102.007h-1.5a.75.75 0 0 1-.102-1.493l.102-.007h1.5Zm-17-.029a.75.75 0 0 1 .102 1.494l-.102.006h-1.5a.75.75 0 0 1-.102-1.493l.102-.007h1.5Zm1.64-6.37.084.072 1.06 1.06a.75.75 0 0 1-.976 1.134l-.084-.073-1.06-1.06a.75.75 0 0 1 .976-1.134Zm13.188.072a.75.75 0 0 1 .073.977l-.073.084-1.06 1.06a.75.75 0 0 1-1.133-.976l.072-.084 1.06-1.061a.75.75 0 0 1 1.061 0ZM12 1.99a.75.75 0 0 1 .743.648l.007.102v1.5a.75.75 0 0 1-1.493.101l-.007-.102v-1.5a.75.75 0 0 1 .75-.75Z"/></svg>
                        <svg id="dark" fill="var(--font-light)" width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.026 17.001c-2.762 4.784-8.879 6.423-13.663 3.661a9.964 9.964 0 0 1-3.234-2.983.75.75 0 0 1 .365-1.131c3.767-1.348 5.785-2.911 6.956-5.146 1.232-2.353 1.551-4.93.689-8.464a.75.75 0 0 1 .769-.926 9.961 9.961 0 0 1 4.457 1.327C21.149 6.1 22.788 12.217 20.025 17Zm-8.248-4.903c-1.25 2.388-3.31 4.099-6.817 5.499a8.492 8.492 0 0 0 2.152 1.766 8.501 8.501 0 1 0 8.502-14.725 8.485 8.485 0 0 0-2.792-1.016c.647 3.384.23 6.044-1.045 8.476Z"/></svg>
                    </button>
                </div>
            </nav>

            <div class="cs-intro">
                <video class="cs-img black" muted autoplay loop>
                    <source src="/assets/cs-music/header.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>

        <main class="about center">
            <h1 class="bot-space">Overview</h1>
            <div class="text row">
                <div>
                    <h2 class="top-space">Problem</h2>
                    <p class="grey about bot-space">Apple Music is a service that is used by millions of people around the world. People genuinely love the platform and what it has to offer but there are aspects of it that can be enhanced. The goal of this project was to recreate something that was easier and more seamless to use and provided that sense of improvement sought out by some of their most beloved users.</p>
                    <h2 class="top-space">Solution</h2>
                    <p class="grey about bot-space">I reimagined the desktop version's For You section which is an experience for surfacing personalized music recommendations. I focused on the core experience and visual interface.</p>
                </div>
                
                <div>
                    <h2 class="top-space">Timeline</h2>
                    <p class="grey about bot-space">2 weeks, December 2020</p>
                    <h2 class="top-space">Team</h2>
                    <p class="grey about bot-space">Solo project</p>
                    <h2 class="top-space">Roles and responsibilities</h2>
                    <p class="grey about bot-space">I worked through the design process as a sole designer.</p>
                </div>
            </div>

            <h1 class="bot-space head-space">Discover</h1>
            <h2 class="top-space">Music is life</h2>
            <p class="grey about bot-space">I'm not your ordinary "I listen to music" guy, I religiously listen to music, all kinds too. The focal point of this project was to enhance features, add new ones and improve usability overall to make the service we love even better. I use Apple Music every single day so myself along with many other heavy users have opinions on what we would like to see on our favorite platform.</p>
            <h2 class="top-space">User research</h2>
            <p class="grey about bot-space">I conducted brief interviews with four heavy Apple Music users focusing on the overall interface and new features they would want.</p>
            <img class="white black bot-space" src="/assets/cs-music/insights.png" alt="User research insights">

            <h2 class="top-space">Secondary research</h2>
            <p class="grey about bot-space">I looked at Spotify, a more established music streaming service vs YouTube Music, which is on the rise.</p>
            <img class="white black bot-space" src="/assets/cs-music/comp.png" alt="Apple Music competitors">

            <h2 class="head-space">Takeaways</h2>
            <p class="grey about top-space">1.) They both lack personalization. None of these services have a multitasking aspect that allow you to create the experience you want</p>
            <p class="grey about top-space">2.) Both of these applications have a consistent user interface and layout with some exceptions throughout their mobile and desktop versions</p>
            
            <h1 class="bot-space head-space">Define</h1>
            <h2 class="head-space">Problem definition</h2>
            <p class="grey about top-space">It's all about how the users feel about using the product. I strive to create an overall experience where they will be happy with the functionality and intuitive nature of the interface. Based on my research, the lack of personalization and consistency were a key problem that came up so I decided to focus my redesign on those two things.</p>

            <h2 class="top-space">Ideation</h2>
            <p class="grey about bot-space">I invited two people to participate in a brainstorming session and at the end of it we were able to decide on the most important aspects to focus on.</p>
            <img class="white black bot-space" src="/assets/cs-music/space.png" alt="Project's problem space">

            <h2 class="top-space">Solution</h2>
            <p class="grey about bot-space">After performing the research and gathering all possible solutions, I narrowed it down to these four key things that I would integrate into the reimagined Apple Music.</p>
            <img class="white black bot-space" src="/assets/cs-music/pillars.png" alt="Project's core pillars">

            <h2 class="head-space">User flow</h2>
            <p class="grey about top-space">The challange was to figure out how and where I can place the new feature in a way that makes sense and doesn't break Apple Music's existing design patterns. So I created this basic user flow of adding a playlist/album to the side-bar to help me understand the overall process to implement.</p>
            <img class="cs-img white black head-space" src="/assets/cs-music/flow.png" alt="Apple Music improved user flow">

            <h1 class="bot-space head-space">Develop</h1>
            <h2 class="head-space">Keeping it consistent with iOS</h2>
            <p class="grey about top-space">Sometimes big and more often little details like these go unnoticed even though they make up the overall experience. The goal was to use Apple Music's current design patterns in the mobile app so the user is familiar and can navigate through the interface seamlessly.</p>
            <img class="cs-img white black head-space" src="/assets/cs-music/consistent.png" alt="Apple Music improved layout">
            
            <h2 class="head-space">1.) Typography</h2>
            <p class="grey about top-space">Using Apple's San Francisco font was a given. On top of that, I paid close attention to the sizing and relative weights of the headings/sub headings to ensure consistency.</p>

            <h2 class="top-space">2.) Familiar menu</h2>
            <p class="grey about top-space">Navigation is one of the most important aspects of a streamlined user experience. According to research I conducted, on desktop sites, the users eye path starts from the upper-left corner and moves down and right from there. As a result of that, I decided to move the menu to the top and get users familiar right from the first glance.</p>

            <h2 class="top-space">3.) Background blur</h2>
            <p class="grey about top-space">This sense of layers and blur got introduced in iOS 7 and has been a staple of Apple's OS experiences ever since. It adds a level of unique depth that minimally represents hierarchy and was definitely something to implement.</p>

            <h2 class="top-space">4. Player design</h2>
            <p class="grey about top-space">iOS 14 introduced this type of player design, with the most prominent colors of the album art blurred in the background. It was widely accepted by iOS users and would be a welcome feature on the desktop version.</p>

            <h2 class="head-space">Revamped layout</h2>
            <p class="grey about top-space">45 was the magic number this time around.</p>
            <img class="cs-img white black head-space" src="/assets/cs-music/layout.png" alt="Redesign's layout">
            <h2 class="head-space">Revamped player</h2>
            <p class="grey about top-space">In terms of how much functionality the player can provide, I wanted to make the most of the space. The volume bar is a waste of space on the player - very few use it, most just adjust the volume with their headphones or keyboard buttons. As a result, I alotted more space to the time bar as that is something users use more often. Regarding the scrub, there is no visible scrub until you hover to slide the time on the old player which is quite confusing so I made sure there is something users can see and directly use. Given the breadth of space available, other functions can also be implemented at the users discretion like the heart to love music. The old player also does not allow you to go to the artist page by clicking on their name in the player so that is something that I wanted to implement as well.</p>
            <img class="cs-img white black head-space" src="/assets/cs-music/before-after.png" alt="Redesign's player">
            
            <h2 class="head-space">Redone artwork</h2>
            <p class="grey about top-space">I wanted to reiterate Jason Yuan's words, "Album Artwork should be treated as part of the UI, and not a stand-alone visual component." The current aesthetic of Apple Music's album artwork doesn't quite create the sense of consistency throughout the entire interface. Users should know what they are looking for and where the text will be placed on artwork, not go searching for it (given that it is even there). On that point, some artwork doesn't have text so it can be difficult to infer what the playlist might be about.</p>
            <img class="cs-img white black head-space" src="/assets/cs-music/old-art.png" alt="Old Apple Music artwork">
            <p class="grey about top-space">Apple Music has recently been using mesh gradients to I wanted to continue that and keep it consistent across the whole platform. With the album text in the top-left everytime it simplifies ambiguity and allows the rest of the work to be pictures that represent the playlist/album as a whole. The colors of the mesh gradient depend on the mood/vibe and I would love to see the mesh gradients animate on user input if it doesn't take a toll on battery.</p>
            <img class="cs-img white black head-space" src="/assets/cs-music/new-art.png" alt="New Apple Music artwork">
            
            <h2 class="head-space">Multitasking</h2>
            <p class="grey about top-space">For this feature, I wanted to focus on the interaction aspect. Currently, when you click on a playlist/album, Apple Music will take you to an entirely different page showing the album and completely interrupt your browsing experience. So this way just by clicking on a playlist/album, it'll appear on the side-bar. The goal was to take the focus beyond the user interface and include the way they would interact with this feature. The mulititasking feature allows the user to quickly view the item, have multiple items at once and really use the side-bar to their hearts content. This makes the entire experience more enjoyable and user friendly.</p>
            <img class="cs-img white black head-space" src="/assets/cs-music/multitasking.png" alt="Improved multitasking design">
            <img class="cs-img white black head-space" src="/assets/cs-music/multitasking2.png" alt="Improved multitasking design">
            <img class="cs-img white black head-space" src="/assets/cs-music/multitasking3.png" alt="Improved multitasking design">

            <h1 class="bot-space head-space">Learnings, reflections and outcome</h1>
            <p class="grey about top-space">This project was constructed over a span of two weeks and it took some time to precisely come up with the problems that I was going to tackle. This project in particular taught me how to work within the constraints of an existing product and design within an existing system. Since users are already familiar with these conventions, breaking them could hurt usability. When building upon such a huge platform, user testing is essential at every design update to ensure the design still aligns with user experience and business goals. It also opens up more points of focus and use cases to consider so that is something I would want to work on more if I were to do this again. As this was a passion project, I hope it sheds some light on a new possible angle of Apple Music.</p>
        </main>

        <footer>
            <div class="group">
                <h1>Hello from Toronto,</h1>
                <h1 class="bot-space">Canada</h1>
            </div>
            <div class="group">
                <p>Status</p>
                <br>
                <p>Going with the flow.</p>
            </div>
            <div class="group">
                <p>Contact</p>
                <br>
                <p><a class="underline-animation" href="mailto:latxhman@gmail.com"
                        target="_blank">latxhman@gmail.com</a></p>
                <p><a class="underline-animation" href="https://www.linkedin.com/in/brian-latchman/"
                        target="_blank">Linkedin</a>
                </p>
                <p><a class="underline-animation" href="https://www.instagram.com/latxhman/"
                        target="_blank">Instagram</a></p>
                <p><a class="underline-animation" href="https://github.com/latxh/" target="_blank">Github</a></p>
            </div>
            <div class="group">
                <p>Credits</p>
                <br>
                <p>Coded by yours truly.</p>
                <p>All rights reserved.</p>
            </div>
            <div class="spacer"></div>
        </footer>
    </div>

    <script id="jsbin-javascript">
        (function () {
            let Mouse, PI, abs, animloop, camera, canvas, cos, ctx, cubes, distance, frame, geometry, hypotenuse, material, offset, renderer, resizeHandler, scene, seed, side, sidehypotenuse, sin, sqrt, start, t, x, xside, y, yside, _i, _j, _ref, _ref1, _ref2, _ref3;
            t = 0;
            start = Date.now();
            seed = -40;
            frame = 0;
            PI = Math.PI;

            sin = function (a) {
                return Math.sin(a);
            };

            cos = function (a) {
                return Math.cos(a);
            };

            abs = function (a) {
                return Math.abs(a);
            };

            sqrt = function (a) {
                return Math.sqrt(a);
            };

            hypotenuse = function (a, b) {
                return Math.sqrt(a * a + b * b);
            };

            distance = function (x1, y1, x2, y2) {
                return hypotenuse(x2 - x1, y2 - y1);
            };

            scene = new THREE.Scene();
            camera = new THREE.OrthographicCamera(window.innerWidth / -2, window.innerWidth / 2, window.innerHeight / 2, window.innerHeight / -2, -50 * 100, 30 * 1000);
            renderer = new THREE.WebGLRenderer();
            canvas = document.createElement('canvas');
            ctx = canvas.getContext('2d');

            (resizeHandler = function () {
                camera.left = canvas.left = window.innerWidth / -2;
                camera.right = canvas.right = window.innerWidth / 2;
                camera.bottom = canvas.bottom = window.innerHeight / -2;
                camera.top = canvas.top = window.innerHeight / 2;
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                return canvas.hyp = hypotenuse(canvas.width, canvas.height);
            })();

            window.addEventListener('resize', resizeHandler, false);
            document.body.appendChild(renderer.domElement);
            side = hypotenuse(canvas.width, canvas.height) / 40;
            geometry = new THREE.BoxGeometry(side + 1, side + 1, side + 5);
            material = new THREE.MeshBasicMaterial({});
            cubes = [];
            xside = side;
            yside = side;
            sidehypotenuse = hypotenuse(side, side);
            offset = 75;

            for (x = _i = _ref = camera.left * 1.3, _ref1 = camera.right * 1.3; xside > 0 ? _i <= _ref1 : _i >= _ref1; x = _i += xside) {
                for (y = _j = _ref2 = camera.bottom * 1.3, _ref3 = camera.top * 1.3; yside > 0 ? _j <= _ref3 : _j >= _ref3; y = _j += yside) {
                    cubes.push(new THREE.Mesh(geometry, new THREE.MeshBasicMaterial({
                        color: 0x00ffff,
                        transparent: true,
                        wireframe: false,
                        opacity: 1
                    })));
                    cubes[cubes.length - 1].position.x = x;
                    cubes[cubes.length - 1].position.y = y;
                    cubes[cubes.length - 1].position.z = x + y;
                    scene.add(cubes[cubes.length - 1]);
                }
            }

            camera.position.set(0, 0, side * 10);
            Mouse = {
                down: false,
                held: 0,
                x: canvas.width / 2,
                y: canvas.height / 2,
                x0: 0,
                y0: 0,
                events: {
                    move: function (e) {
                        if ("touches" in e) {
                            e.preventDefault();
                            e = e.touches[0];
                        }
                        Mouse.x = (Mouse.x + e.pageX) * 0.5;
                        Mouse.y = (Mouse.y + e.pageY) * 0.5;
                        Mouse.x0 = Mouse.x - canvas.width / 2;
                        return Mouse.y0 = Mouse.y - canvas.height / 2;
                    },
                    down: function (e) {
                        return Mouse.down = !Mouse.down;
                    },
                    up: function (e) {
                        return Mouse.down = !Mouse.down;
                    }
                }
            };

            window.addEventListener('mousemove', Mouse.events.move, false);
            window.addEventListener('mousedown', Mouse.events.down, false);
            window.addEventListener('mouseup', Mouse.events.up, false);
            window.addEventListener('touchmove', Mouse.events.move, false);
            window.addEventListener('touchstart', Mouse.events.down, false);
            window.addEventListener('touchstop', Mouse.events.up, false);
            camera.up = new THREE.Vector3(0, 1, 0);

            animloop = function () {
                var a, b, c, dist, dist0, distneg, g, i, r, _k, _ref4;
                animloop.id = requestAnimationFrame(animloop);
                t = (Date.now() - start) / 1000 + seed;
                frame++;
                camera.position.set(side * 10, side * 10, -side * 10);
                camera.lookAt(new THREE.Vector3(0, 0, 0));
                if (Mouse.down) {
                    Mouse.held++;
                }
                for (i = _k = 0, _ref4 = cubes.length; 0 <= _ref4 ? _k < _ref4 : _k > _ref4; i = 0 <= _ref4 ? ++_k : --_k) {
                    c = cubes[i];
                    dist = distance(-Mouse.x0, -Mouse.y0, c.position.x, c.position.y);
                    dist0 = distance(0, 0, c.position.x, c.position.y);
                    distneg = distance(Mouse.x0, Mouse.y0, c.position.x, c.position.y);
                    c.scale.y = 2.25 + 1.25 * sin(dist / canvas.hyp * PI * 7 - t * 0.8 - Mouse.held / 50) * cos(dist / canvas.hyp * PI * 4 - t * 1.5 - Mouse.held / 50) + (1 + sin((distneg - dist) / canvas.hyp * PI * 1));
                    a = c.position.z;
                    r = 0.4 + 0.40 * sin(distneg / canvas.hyp * PI * 2 * 0.75 - t / 3.0 + 3 + Mouse.held / 80 + c.scale.y / 3.5);
                    g = 0.4 + 0.40 * sin(distneg / canvas.hyp * PI * 2 * 0.75 - t / 3.1 + 2 + Mouse.held / 81 + c.scale.y / 3.5);
                    b = 0.4 + 0.40 * sin(distneg / canvas.hyp * PI * 2 * 0.75 - t / 3.2 + 1 + Mouse.held / 82 + c.scale.y / 3.5);
                    cubes[i].material.color = new THREE.Color(r, g, b);
                }
                return renderer.render(scene, camera);
            };

            animloop();

        }).call(this);
    </script>

    <script>
        let style = document.createElement('style');
        let canvasRef = document.getElementsByTagName('canvas')[0]
        let sun = document.getElementById('light');
        let moon = document.getElementById('dark');
        let canvasOn = document.getElementById('canvas-on');
        let canvasOff = document.getElementById('canvas-off');

        let darkModeQuery = window.matchMedia("(prefers-color-scheme: dark)");
        let appearance = localStorage.getItem("appearance") ?? "system";
        let systemDarkMode = darkModeQuery.matches;
        let reducedMotionQuery = window.matchMedia("(prefers-reduced-motion: reduce)");
        let motion = localStorage.getItem("motion") ?? "system";
        let systemReducedMotion = reducedMotionQuery.matches;

        const updateAppearance = () => {
            localStorage.setItem("appearance", appearance);
            if (appearance === "system" ? systemDarkMode : appearance === "dark") {
                sun.classList.remove("hide")
                moon.classList.add("hide")

                document.body.classList.add("dark");
                style.innerHTML = ':root {color-scheme: dark;}';
                document.head.appendChild(style);
            } else {
                sun.classList.add("hide")
                moon.classList.remove("hide")

                document.body.classList.remove("dark");
                style.innerHTML = ':root {color-scheme: light;}';
                document.head.appendChild(style);
            }
        };

        const updateCanvas = () => {
            localStorage.setItem("motion", motion);
            if (motion === "system" ? systemReducedMotion : motion === "reduce") {
                canvasOn.classList.remove("hide")
                canvasOff.classList.add("hide")
                canvasRef.classList.add("hide");
            } else {
                canvasOn.classList.add("hide")
                canvasOff.classList.remove("hide")
                canvasRef.classList.remove("hide");
            }
        };

        darkModeQuery.addEventListener("change", (m) => { systemDarkMode = m.matches; updateAppearance(); });
        reducedMotionQuery.addEventListener("change", (m) => { systemReducedMotion = m.matches; updateCanvas(); });

        updateAppearance();
        updateCanvas();

        const toggleDarkMode = (e) => { appearance = appearance === "dark" ? "light" : "dark"; updateAppearance(); };
        const toggleCanvas = (e) => { motion = motion === "reduce" ? "no-preference" : "reduce"; updateCanvas(); };
    </script>
    <script>
        let topButton = document.getElementById("top-btn");
        window.onscroll = function() {scrollFunction()};

        function scrollFunction() {
            if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
                topButton.style.display = "flex";
            } else {
                topButton.style.display = "none";    
            }
        }

        function topFunction() {
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
        }
    </script>
</body>

</html>
